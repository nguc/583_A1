<!DOCTYPE html>
<meta charset="utf-8" />
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="https://d3js.org/d3.v4.js"></script>
</head>


<body>
    <div id="chart"></div>

    <script>

        // set the dimensions and margins of the graph
        var margin = { top: 75, right: 10, bottom: 20, left: 100 },
             width = 960 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        // set dimensions of the cells in the graph
        const rows = 15,
            col = 15;
            cellWidth = 50,
            cellHeight = 25,
            filledCellWidth = 49,
            filledCellHeight = 24;


        // set the ranges
        var x = d3.scaleOrdinal([0, col]);
        var y = d3.scaleLinear().range([height, 0]);

        var svg = d3.select("body").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        // get the data
        d3.csv("MaxToMin.csv", function (error, data) {
            if (error) throw error;

            data.forEach(function (d) {
                d.location = d.location;
                d.action = d.action;
                d.value = +d.value;
            });

            // scale the range of the data
            x.domain(d3.extent(data, function (d) { return d.action; }));
            y.domain([0, d3.max(data, function (d) { return d.close; })]);

            // add the cells
            svg.selectAll("rect")
                .data(data)
                .enter()
                    .append("rect")
                    .attr("width", filledCellWidth)
                    .attr("height", filledCellHeight)
                    .attr("x", function (d, i) { return ((i - (Math.floor(i / col) * col)) * cellWidth); })
                    .attr("y", function (d, i) { return Math.floor(i / rows) * cellHeight; })
                
                .attr("fill", function (d) {
                    if (d.value <= 1) {
                        return "#e60000"    // red
                    }
                    else if (d.value <= 3) {
                        return "#ff6666"    //light red
                    }
                    else if (d.value <= 5){
                        return "#ffff42"   // light yellow
                    }
                    else if (d.value <= 7) {
                        return "#66ff66"    // light green
                    }
                    else {
                        return "#009933"    // green
                    }

                })

            // add the x axis
            // Add the x Axis
            svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisTop(x));

            svg.append("text")
                .attr("transform", "translate(" + (width / 2) + " ," + (height + margin.top + 20) + ")")
                .style("text-anchor", "middle")
                .text("Actions")
                    
         });


    </script>
  

</body>


</html>
